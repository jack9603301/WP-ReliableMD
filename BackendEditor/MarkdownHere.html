<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Markdown Here</title>
    <meta name="viewport" content="width=device-width,
                                     initial-scale=1.0,
                                     maximum-scale=1.0,
                                     user-scalable=no">

    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link href="//cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>

    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="//cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- include summernote css/js -->
    <link href="summernote.css" rel="stylesheet">
    <script src="summernote.js"></script>
    <script src="lang/summernote-zh-CN.js"></script>


</head>

<body>
<div class="container">

    <!--<div class="clearfix visible-xs"></div>-->
    <!--</div>-->
    <div class="row"><h4>编辑器</h4></div>
    <div class="row" style="height: 25em;">
        <textarea id="mdeditor" style="display: none;"></textarea>
        <div id="summernote"></div>
    </div>
</div>

<script src="../MarkdownHere/marked.js"></script>
<script src="../MarkdownHere/jsHtmlToText.js"></script>
<script src="../MarkdownHere/highlightjs/highlight.js"></script>
<script src="jquery-fieldselection.js"></script>
<script src="mdeditor.js"></script>

<script>


    $(document).ready(function () {
        var $summernote = $('#summernote');
        updateMD = undefined;

        function update() {
            var $note = $(".note-editable");
            var text = htmlToText($note.html());
            duplacateSingnal();
            $summernote.summernote('saveRange');
            updateMD(text);
            $summernote.summernote('restoreRange');
            $note.focus();
        }

        $summernote.summernote({
            lang: 'zh-CN',
            height: 300,                 // set editor height
            minHeight: null,             // set minimum height of editor
            maxHeight: null,             // set maximum height of editor
            focus: true,                 // set focus to editable area after initializing summernote
            callbacks: {
                onKeyup: update,
                onPaste: update
            }
        });
        updateMD = makeUpdateMD($(".note-editable"));
    });
</script>
</body>
</html>
